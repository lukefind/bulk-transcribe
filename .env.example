# =========================
# Bulk Transcribe â€“ Server Configuration
# =========================

# Web server
PORT=8476

# Preferred device: cpu | cuda | metal
# Linux servers: cpu or cuda
# macOS: metal
DEVICE=cpu

# =========================
# Worker configuration
# =========================

# Default workers for CPU mode
DEFAULT_WORKERS=2

# Hard cap for UI dropdown (safety)
MAX_WORKERS=8

# =========================
# GPU (NVIDIA CUDA) config
# =========================

# If DEVICE=cuda, this controls which GPUs are visible.
# Examples:
#   CUDA_VISIBLE_DEVICES=0      (use first GPU only)
#   CUDA_VISIBLE_DEVICES=0,1    (use GPU 0 and 1)
#   CUDA_VISIBLE_DEVICES=       (empty = all GPUs)
CUDA_VISIBLE_DEVICES=

# Optional: cap GPU memory usage (advanced users only)
# Example: 0.9 = max 90% of VRAM
CUDA_MEMORY_FRACTION=

# =========================
# Application mode
# =========================

# server = multi-user mode with session isolation (no folder paths from clients)
# local = single-user mode (allows folder picker, legacy endpoints)
APP_MODE=server

# =========================
# Storage paths (inside container)
# =========================

# Root data directory (sessions stored under DATA_ROOT/sessions/)
DATA_ROOT=/data

# Legacy paths (only used in local mode)
INPUT_DIR=/data/input
OUTPUT_DIR=/data/output

# =========================
# Session & Job limits
# =========================

# Session expiry (hours since last activity)
SESSION_TTL_HOURS=24

# Job data retention (days)
JOB_TTL_DAYS=7

# Maximum upload size per request (MB)
MAX_UPLOAD_MB=500

# Maximum files per transcription job
MAX_FILES_PER_JOB=50

# Force secure cookies (set to 1 if behind HTTPS proxy)
COOKIE_SECURE=0

# =========================
# HuggingFace (pyannote diarization)
# =========================

# Only required if you enable diarization features
HF_TOKEN=

# =========================
# Logging
# =========================

# debug | info | warning | error
LOG_LEVEL=info
